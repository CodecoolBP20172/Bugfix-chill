<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'>
        <title>
            {{question["title"]}}
        </title>
    </head>
    <body>
        <table>
            <tr>
                <td>
                    <b>Submitted:</b> {{question["submission_time"]}}
                </td>
                <td>
                    <b>Views:</b> {{question["view_number"]}}
                </td>
                <td>
                    <b>Votes:</b> {{question["vote_number"]}}
                <td>
                    <a href="/question/{{ question['id'] }}/edit"><img src="/static/edit.svg" width="20" height="20" alt="Edit"></a>
                </td>
                <td>
                    <a href="/question/{{ question['id'] }}/delete"><img src="/static/waste-bin.svg" width="20" height="20" alt="Delete"></a>
                </td>
            </tr>
        </table>
        <h2>
            {% autoescape false %}
                {{ question["title"] }}
            {% endautoescape %}
        </h2>
        <p>
            {% autoescape false %}
                {{ question["message"] }}
            {% endautoescape %}
        </p>
        {% if question['image'] != None %}
            <p>
                <img src="{{question['image']}}" height=20% width="20%" />
            </p>
        {% endif %}
        <table>
            <tr>
                <td>
                    <form action="/upvote_question" method="POST">
                    <input type="hidden" name="question_id" value="{{ question['id'] }}"/>
                    <input type="hidden" name="vote" value="up"/>
                        <p>
                            <button type="Submit"><img src="/static/upvote.png" height="20" width="20" /></button>
                        </p>
                    </form>
                </td>
                <td>
                    <form action="/upvote_question" method="POST">
                    <input type="hidden" name="question_id" value="{{ question['id'] }}"/>
                    <input type="hidden" name="vote" value="down"/>
                        <p>
                            <button type="Submit"><img src="/static/downvote.png" height="20" width="20" /></button>
                        </p>
                    </form>
                </td>
            </tr>
        </table>
            <p>
                Comments:
            </p>
            {% for dict in question_comments%}
            <p>
                {{ dict["message"]}} , Submission time: {{ dict["submission_time"] }}, Edited: {{ dict["edited_count"] }}
                <a href="/comments/{{ dict['id'] }}/edit"><img src="/static/edit.svg" width="20" height="20" alt="Edit"></a>
                <a href="/comments/{{ dict['id'] }}/delete"><img src="/static/waste-bin.svg" width="20" height="20" alt="Delete"></a>
            </p>
            {% endfor%}
                    <a href="/question/{{ question['id'] }}/new-comment">Add comment to question</a>
            <form action="{{ url_for('new_answer', question_id=question['id'] ) }}">
                <p>
                    <button type="Submit">Answer this question</button>
                </p>
            </form>
        {% for answer in answers_list %}
            <table>
                <tr>
                    <td><b>Submitted</b>: {{ answer['submission_time'] }}</td>
                    <td><b>Votes:</b> {{answer["vote_number"]}}</td>
                </tr>
                <tr>
                    <td>
                        <pre>   <b>Answer</b>: {{answer['message']}}</pre>
                    </td>
                    <td>
                        {% if question['image'] != '' %}
                            <pre>   <img src="{{answer['image']}}" height=20% width="20%" /></pre>
                        {% endif %}
                    </td>
                </tr>
            </table>
            <form action="{{ url_for('delete_answer', answer_id=answer['id'] ) }}" method="POST">
                <p>
                    <input type="hidden" name="question_id" value="{{ question['id'] }}"/>
                    <button type="Submit">Delete answer</button>
                    <a href="/answer/{{ answer['id'] }}/new-comment">Add comment to answser</a>
                </p>
                </form>
                <table>
                    <tr>
                        <td><form action="/upvote_answer" method="POST">
                                <input type="hidden" name="question_id" value="{{ question['id'] }}"/>
                                <input type="hidden" name="answer_id" value="{{ answer['id'] }}"/>
                                <input type="hidden" name="vote" value="up"/>
                                <button type="submit"><img src="/static/upvote.png" height="20" width="20" /></button>
                        </form></td>
                        <td><form action="/upvote_answer" method="POST">
                                <input type="hidden" name="question_id" value="{{ question['id'] }}"/>
                                <input type="hidden" name="answer_id" value="{{ answer['id'] }}"/>
                                <input type="hidden" name="vote" value="down"/>
                                <button type="submit"><img src="/static/downvote.png" height="20" width="20" /></button>
                        </form></td>
                    </tr>
                </table>
                Comments:
                {% for answer_dict in answer_comments %}
                <p>
                {% if answer_dict['answer_id'] == answer['id'] %}
                <p>
                    {{ answer_dict["message"]}} , Submission time: {{ answer_dict["submission_time"] }}, Edited: {{ answer_dict["edited_count"] }}
                    <a href="/comments/{{ answer_dict['id'] }}/edit"><img src="/static/edit.svg" width="20" height="20" alt="Edit"></a>
                    <a href="/comments/{{ answer_dict['id'] }}/delete"><img src="/static/waste-bin.svg" width="20" height="20" alt="Delete"></a>
                {% endif %}
                </p>
                </p>
                {% endfor %}
        {% endfor %}
        <p>
            <a href="/"><button>Back to the Questions page</button></a>
        </p>

        <footer>
            <img src="/static/logo_regular.png" height="10%" width="10%" />
        </footer>
    </body>
</html>
